<data-definition>
    <enum-type type-name='worldgen_region_type'>
        <enum-item name='SWAMP'/>
        <enum-item name='DESERT'/>
        <enum-item name='FOREST'/>
        <enum-item name='MOUNTAINS'/>
        <enum-item name='OCEAN'/>
        <enum-item name='LAKE'/>
        <enum-item name='GLACIER'/>
        <enum-item name='TUNDRA'/>
        <enum-item name='GRASSLAND'/>
        <enum-item name='HILLS'/>
    </enum-type>

    <enum-type type-name='worldgen_range_type'>
        <enum-item name='ELEVATION'/>
        <enum-item name='RAINFALL'/>
        <enum-item/>
        <enum-item name='TEMPERATURE'/>
        <enum-item/>
        <enum-item name='DRAINAGE'/>
        <enum-item name='VOLCANISM'/>
        <enum-item name='SAVAGERY'/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
    </enum-type>

    <enum-type type-name='units_other_id'>
        <enum-item name='ANY_RIDER'/>
        <enum-item name='ANY_ANIMAL'/>
        <enum-item name='ANY_BABY2'/>
    </enum-type>

    <struct-type type-name='death_info'
                 instance-vector='$global.world.deaths.all' key-field='id'>
        dtor 0x8C1AE10

        <int32_t name='id'/>
        <int32_t name="unk_4"/>

        <stl-vector name="unk_8" type-name='int32_t' ref-target='unit'/>

        <int32_t name="victim" ref-target='unit'/>
        <int32_t name="killer" ref-target='unit'/>
        <int32_t name="crime_id" ref-target='criminal_case'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='entity' ref-target='historical_entity'/>

        <int32_t name='event_year'/>
        <int32_t name='event_time'/>

        <bitfield name='flags'>
            <flag-bit name='announced_missing'/>
            <flag-bit name='discovered'/>
        </bitfield>

        <enum base-type='int16_t' name='death_cause' type-name='death_type'/>
    </struct-type>

    <struct-type type-name='criminal_case'
                 instance-vector='$global.world.criminal_cases.all' key-field='id'>
        dtor 0x8C166D0

        <int32_t name='id'/>

        <enum name='mode' base-type='int32_t'>
            <enum-item name='ProductionOrderViolation'/>
            <enum-item name='ExportViolation'/>
            <enum-item name='JobOrderViolation'/>
            <enum-item name='ConspiracyToSlowLabor'/>
            <enum-item name='Murder'/>
            <enum-item name='DisorderlyBehavior'/>
            <enum-item name='BuildingDestruction'/>
            <enum-item name='Vandalism'/>
        </enum>

        <int32_t/>
        <int32_t/>
        <int32_t/>

        <int32_t name='criminal' ref-target='unit'/>
        <int32_t name='convicted' ref-target='unit'/>
        <int32_t name='victim' ref-target='unit'/>

        <bitfield name='flags'>
            <flag-bit name='sentenced'/>
            <flag-bit name='discovered'/>
            <flag-bit name='needs_trial'
                      comment='i.e. the player chooses whom to convict'/>
        </bitfield>

        <int32_t name='death_id' ref-target='death_info'/>

        <int32_t name='event_year'/>
        <int32_t name='event_time'/>
        <int32_t name='discovered_year'/>
        <int32_t name='discovered_time'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='entity' ref-target='historical_entity'/>

        <stl-vector comment='reports'>
            <pointer>
                <int32_t name='death_id' ref-target='death_info'/>
                <int32_t name="crime_id" ref-target='criminal_case'/>
                <int32_t name="unk1" comment='unk1 of witness_reports'/>
                <int32_t name="event_year"/>
                <int32_t name="event_time"/>
                <int32_t name='witness' ref-target='unit'/>
                <int32_t name='accuses' ref-target='unit'/>
                <int32_t name="report_year"/>
                <int32_t name="report_time"/>
            </pointer>
        </stl-vector>
    </struct-type>

    <struct-type type-name='world_unk_20'>
        <int8_t/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
        <int32_t/>
        <stl-vector>
            <pointer>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
            </pointer>
        </stl-vector>
        <int16_t/>
        <int16_t/>
        <int16_t/>
    </struct-type>

    <struct-type type-name='world_unk_c0'>
        <int8_t/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
        <stl-vector type-name='int32_t'/>
        <int32_t/>
        <int32_t/>
        <stl-vector>
            <pointer>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
            </pointer>
        </stl-vector>
        <int16_t/>
        <int16_t/>
        <int16_t/>
    </struct-type>

    <struct-type type-name='world'>
        dtor 89fff80
        <stl-vector name='glowing_barriers'>
            <pointer>
                <int8_t/>
                <int32_t/>
                <stl-vector name='buildings' type-name='int32_t' ref-target='building'/>
                <compound name='pos' type-name='coord'/>
            </pointer>
        </stl-vector>
        <stl-vector name='deep_vein_hollows'>
            <pointer>
                <int8_t/>
                <int32_t/>
                <compound name='tiles' type-name='coord_path'/>
                <compound name='pos' type-name='coord' comment='seemingly unused'/>
            </pointer>
        </stl-vector>

        <stl-vector name='unk_20' pointer-type='world_unk_20'/>

        <stl-vector name='engravings' pointer-type='engraving'/>

        <compound name='vermin'>
            <stl-vector name='all' pointer-type='vermin'/>
            <stl-vector name='colonies' pointer-type='vermin'/>
        </compound>
        <stl-vector name='unk_3C' pointer-type='coord'/>
        <stl-vector name='campfires'>
            <pointer>
                <compound type-name='coord' name='pos'/>
                <int32_t name='timer'/>
            </pointer>
        </stl-vector>
        <stl-vector name='web_clusters'>
            <pointer>
                <stl-vector type-name='int16_t' name='x'/>
                <stl-vector type-name='int16_t' name='y'/>
                <int16_t name='z'/>
                <int16_t name='race' ref-target='creature_raw'/>
                <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race' />
                <compound type-name='coord2d' name='pos_min'/>
                <compound type-name='coord2d' name='pos_max'/>
                <stl-vector type-name='int32_t' name='ambushers' ref-target='unit'/>
            </pointer>
        </stl-vector>
        <stl-vector name='fires'>
            <pointer>
                <compound type-name='coord' name='pos'/>
                <int16_t name='timer'/>
                <uint16_t name='temperature'/>
                <uint16_t name='unk1' comment='10000'/>
                <uint16_t name='unk2'/>
                <uint16_t name='unk3'/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_6C'>
            <pointer>
                <compound type-name='coord'/>
                <int8_t/>
                <stl-vector type-name='int16_t'/>
                <stl-vector type-name='int16_t'/>
                <stl-vector type-name='int16_t'/>
                <stl-vector type-name='int16_t'/>
            </pointer>
        </stl-vector>
        <stl-vector name='ocean_waves'>
            <pointer>
                <int16_t name='x1'/>
                <int16_t name='y1'/>
                <int16_t name='x2'/>
                <int16_t name='y2'/>
                <int16_t name='z'/>
                <int8_t/>
                <int8_t/>
                <int8_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='constructions' pointer-type='construction'/>
        <stl-vector name='unk_90'>
            <pointer>
                <int16_t name='x1'/>
                <int16_t name='y1'/>
                <int16_t name='x2'/>
                <int16_t name='y2'/>
                <int16_t name='z'/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_9C'>
            <pointer>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int32_t/>
                <int32_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_A8'>
            <pointer>
                <int8_t/>
                <int32_t/>
                <stl-vector type-name='int32_t'/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_B4'>
            <pointer>
                <int8_t/>
                <int32_t/>
                <stl-vector type-name='int16_t'/>
                <stl-vector type-name='int16_t'/>
                <stl-vector type-name='int16_t'/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_C0' pointer-type='world_unk_c0'/>
        <stl-vector name='unk_CC'>
            <pointer>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int32_t/>
                <int8_t/>
                <int32_t/>
                <int16_t/>
                <int16_t/>
                <int32_t/>
                <int32_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_D8'>
            <pointer>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int32_t/>
                <int8_t/>
                <int16_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_E4'>
            <pointer>
                <int16_t name='region_x'/>
                <int16_t name='region_y'/>
                <int16_t name='unk4'/>
                <int16_t name='unk6'/>
                <int16_t name='local_feature_idx'/>
                <int32_t name='global_feature_idx'/>
                <int32_t name='unk10'/>
                <int16_t name='unk14'/>
                <int16_t name='unk16'/>
                <int16_t name='unk18'/>
                <int16_t name='unk1a'/>
                <int16_t name='unk1c'/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_F0'>
            <pointer>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int8_t/>
                <stl-vector type-name='int16_t'/>
                <stl-vector type-name='int16_t'/>
                <stl-vector type-name='int16_t'/>
                <stl-vector type-name='int16_t'/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_FC'>
            <pointer>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='effects' pointer-type='effect_info'/>

        <stl-vector name='coin_batches'>
            <pointer>
                <int32_t name='year'/>
                <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
                <int32_t name='mat_index'/>
                <int32_t name='entity' ref-target='historical_entity'/>
                <int32_t name='ruler' ref-target='historical_figure'/>
                <compound name='image_front'>
                    <int32_t name='id' ref-target='art_image_chunk'/>
                    <int16_t name='subid' ref-target='art_image' aux-value='$$.id'/>
                </compound>
                <compound name='image_back'>
                    <int32_t name='id' ref-target='art_image_chunk'/>
                    <int16_t name='subid' ref-target='art_image' aux-value='$$.id'/>
                </compound>
            </pointer>
        </stl-vector>

        <stl-vector name='populations' pointer-type='local_population'/>

        --

        <stl-vector name='manager_orders' pointer-type='manager_order'/>

        <stl-vector name='mandates' pointer-type='mandate'/>

        --  Entities

        <compound name='entities'>
            <stl-vector name='all' pointer-type='historical_entity'/>

            <stl-vector name='bad' has-bad-pointers='true' pointer-type='historical_entity'/>
        </compound>

        -- Apparently a temporary buffer for world construction stuff

        <compound name='worldgen_coord_buf'>
            <static-array count='20000' type-name='coord2d' name='slots'/>
            <int16_t name='next_slot'/>
        </compound>

        -- Units

        <compound name='units'>
            <stl-vector name='all' pointer-type='unit'/>

            <stl-vector name='active' pointer-type='unit' comment='not sorted, entry 0 is adventurer'/>

            <static-array name='other' count='3' index-enum='units_other_id'>
                <stl-vector pointer-type='unit'/>
            </static-array>

            <stl-vector name='bad' has-bad-pointers='true' pointer-type='unit'/>
        </compound>

        -- Unit and Art Chunks

        <stl-vector name='unit_chunks' pointer-type='unit_chunk'/>
        <stl-vector name='art_image_chunks' pointer-type='art_image_chunk'/>

        -- Nemesis

        <compound name='nemesis'>
            <stl-vector name='all' pointer-type='nemesis_record'/>

            <stl-vector name='bad' has-bad-pointers='true' pointer-type='nemesis_record'/>
        </compound>

        <bool name='unk4'/>

        -- Items

        <compound name='items'>
            dtor 852f4b0

            <stl-vector name='all' pointer-type='item'/>

            <static-array name='other' count='129' index-enum='items_other_id'>
                <stl-vector pointer-type='item'/>
            </static-array>

            <stl-vector name='bad' has-bad-pointers='true' pointer-type='item'/>

            <stl-vector name='bad_tag' type-name='int32_t'/>
        </compound>

        -- Artifacts

        <compound name='artifacts'>
            <stl-vector name='all' pointer-type='artifact_record'/>

            <stl-vector name='bad' has-bad-pointers='true' pointer-type='artifact_record'/>
        </compound>

        -- Jobs and projectiles

        <df-linked-list name='job_list' type-name='job_list_link'/>

        <df-linked-list name='proj_list' type-name='proj_list_link'/>

        -- Buildings

        <compound name='buildings'>
            dtor 85316f0

            <stl-vector name='all' pointer-type='building'/>

            <static-array name='other' count='87' index-enum='buildings_other_id'>
                <stl-vector pointer-type='building'/>
            </static-array>

            <stl-vector name='bad' has-bad-pointers='true' pointer-type='building'/>
        </compound>

        <bool name='check_bridge_collapse'/>
        <bool name='check_machine_collapse' comment='?'/>

        -- Machines (connected groups of gears and so on)

        <compound name='machines'>
            <stl-vector name='all' pointer-type='machine'/>
            <stl-vector name='bad' has-bad-pointers='true' pointer-type='machine'/>
        </compound>

        -- Flow guides (whatever those are)

        <compound name='flow_guides'>
            <stl-vector name='all' type-name='pointer'/>
            <stl-vector name='bad' has-bad-pointers='true' type-name='pointer'/>
        </compound>

        -- Stockpile classifier

        <compound name='stockpile'>
            <static-array type-name='int32_t' name='num_jobs' count='10' index-enum='hauler_type'/>
            <static-array type-name='int32_t' name='num_haulers' count='10' index-enum='hauler_type'/>

            -- Pointers used as tokens; data never accessed by the look of it:

            <compound name='simple1'>
                <int8_t/>
                <int8_t name='food'/>
                <int8_t/>
                <int8_t/>
            </compound>
            <stl-vector name='seeds' type-name='int8_t'
                        index-refers-to='(find-plant-raw $)'/>
            <stl-vector name='plants' type-name='int8_t'
                        index-refers-to='(find-plant-raw $)'/>
            <stl-vector name='cheese' type-name='int8_t'
                        index-refers-to='(find-creature $)'/>
            <stl-vector name='meat_fish' type-name='int8_t'
                        index-refers-to='(find-creature $)'/>
            <stl-vector name='eggs' type-name='int8_t'
                        index-refers-to='(find-creature $)'/>
            <stl-vector name='leaves' type-name='int8_t'
                        index-refers-to='(find-plant-raw $)'/>
            <stl-vector name='plant_powder' type-name='int8_t'
                        index-refers-to='(find-plant-raw $)'/>
            <compound name='simple2'>
                <int8_t name='seeds'/>
                <int8_t name='plants'/>
                <int8_t name='cheese'/>
                <int8_t name='fish'/>
                <int8_t name='meat'/>
                <int8_t name='leaves'/>
                <int8_t name='powder'/>
                <int8_t name='eggs'/>
            </compound>
            <stl-vector name='liquid_plant' type-name='int8_t'
                        index-refers-to='(find-plant-raw $)'/>
            <stl-vector name='liquid_animal' type-name='int8_t'
                        index-refers-to='(find-creature $)'/>
            <stl-vector name='liquid_builtin' type-name='int8_t'
                        index-refers-to='(material-by-id $ -1)'/>
            <compound name='simple3'>
                <int8_t name='glob_fat'/>
                <int8_t name='glob_tallow'/>
                <int8_t name='glob_paste'/>
                <int8_t name='glob_pressed'/>

                <int8_t name='weapons'/>
                <int8_t name='shields'/>
                <int8_t name='ammo'/>
                <int8_t name='coins'/>

                <int8_t name='bar_blocks'/>
                <int8_t name='gems' comment='not large'/>
                <int8_t name='finished_goods'/>
                <int8_t name='tanned_skins'/>

                <int8_t name='thread_cloth'/>
                <int8_t/>
                <int8_t/>
                <int8_t/>
            </compound>
        </compound>

        -- Plants

        <compound name='plants'>
            <stl-vector name='all' pointer-type='plant'/>
            <stl-vector name='shrub_dry' pointer-type='plant'/>
            <stl-vector name='shrub_wet' pointer-type='plant'/>
            <stl-vector name='tree_dry' pointer-type='plant'/>
            <stl-vector name='tree_wet' pointer-type='plant'/>
            <stl-vector name='empty' pointer-type='plant'/>
        </compound>

        -- Adventure quests

        <df-linked-list name='quests' type-name='quest_list_link'/>

        -- Unknown

        <compound name='enemy_status_cache' comment='?'>
            <static-array name='slot_used' type-name='bool' count='500'/>
            <static-array name='rel_map' count='500'>
                <static-array type-name='int8_t' count='500'/>
            </static-array>
            <int32_t name='next_slot'/>
        </compound>

        <compound name='schedules'>
            <stl-vector name='all' pointer-type='schedule_info' />
            <stl-vector name='bad' pointer-type='schedule_info' has-bad-pointers='true' />
        </compound>

        <compound name='squads'>
            <stl-vector name='all' pointer-type='squad'/>
            <stl-vector name='bad' has-bad-pointers='true' pointer-type='squad'/>
        </compound>

        <compound name='unk_518dc' comment='formations?'>
            <stl-vector name='all'>
                <pointer>
                    <int32_t/>?
                </pointer>
            </stl-vector>
            <stl-vector name='bad' has-bad-pointers='true'>
                <pointer/>
            </stl-vector>
        </compound>

        -- Drills

        <compound name='activities'>
            <stl-vector name='all' pointer-type='activity_entry'/>
            <stl-vector name='bad' has-bad-pointers='true' pointer-type='activity_entry'/>
        </compound>

        -- Reports and announcements

        <compound name='status'>
            dtor 85356e0
            <stl-vector name='reports' pointer-type='report'/>
            <stl-vector name='announcements' pointer-type='report'/>
            <stl-vector name='popups' pointer-type='popup_message'/>

            <int32_t name='next_report_id'/>
            <bitfield name='flags'>
                <flag-bit name='combat'/>
                <flag-bit name='hunting'/>
                <flag-bit name='sparring'/>
            </bitfield>
            <int32_t name='display_timer'/>

            <static-array name='slots' count='100'>
                <comment>Written to by code at 0x80fd7b0</comment>
                <int16_t name='id'/>
                <padding name='info' size='24' alignment='4'
                         comment='Weird garbage. Possibly types change for different entries.'/>
                <stl-string name='unk3a'/>
                <stl-string name='unk3b'/>
                <stl-string name='unk3c'/>
                <stl-string name='unk3d'/>
                <int32_t name='unk4'/>
            </static-array>

            <static-array name='slot_id_used' type-name='int16_t' count='34'/>
            <static-array name='slot_id_idx1' type-name='int16_t' count='34'/>
            <static-array name='slot_id_idx2' type-name='int16_t' count='34'/>

            <int16_t name='slots_used'/>
        </compound>

        <compound name='interaction_instances' comment='v0.34.01'>
            <stl-vector name='all' pointer-type='interaction_instance'/>
            <stl-vector name='bad' has-bad-pointers='true' pointer-type='interaction_instance'/>
        </compound>

        <compound name='written_contents' comment='v0.34.01'>
            <stl-vector name='all' pointer-type='written_content'/>
            <stl-vector name='bad' has-bad-pointers='true' pointer-type='written_content'/>
        </compound>

        <compound name='assumed_identities' comment='v0.34.01 - DF calls these identities'>
            <stl-vector name='all' pointer-type='assumed_identity'/>
            <stl-vector name='bad' has-bad-pointers='true' pointer-type='assumed_identity'/>
        </compound>

        <compound name='deaths' comment='v0.34.01 - DF calls these incidents'>
            <stl-vector name='all' pointer-type='death_info'/>
            <stl-vector name='bad' has-bad-pointers='true' pointer-type='death_info'/>
        </compound>

        <compound name='criminal_cases' comment='v0.34.01 - DF calls these crimes'>
            <stl-vector name='all' pointer-type='criminal_case'/>
            <stl-vector name='bad' has-bad-pointers='true' pointer-type='criminal_case'/>
        </compound>

        <compound name='vehicles' comment='v0.34.08'>
            <stl-vector name='all' pointer-type='vehicle'/>
            <stl-vector name='active' pointer-type='vehicle'/>
            <stl-vector name='bad' has-bad-pointers='true' pointer-type='vehicle'/>
        </compound>

        <pointer name='selected_building' type-name='building'/>
        <enum base-type='int16_t' name='selected_stockpile_type' type-name='stockpile_category'/>
        <bool name='update_selected_building'/>
        <int16_t name='building_width'/>
        <int16_t name='building_height'/>
        <enum name='selected_direction' base-type='int8_t' type-name='screw_pump_direction'/>

        <compound name='map'>
            52cdc
            <stl-vector name='map_blocks' pointer-type='map_block'/>
            <pointer name='block_index' is-array='true'>
                <pointer is-array='true'>
                    <pointer is-array='true'>
                        <pointer type-name='map_block'/>
                    </pointer>
                </pointer>
            </pointer>

            <stl-vector name='map_block_columns' pointer-type='map_block_column'/>
            <pointer name='column_index' is-array='true'>
                <pointer is-array='true'>
                    <pointer type-name='map_block_column'/>
                </pointer>
            </pointer>

            <int32_t name='x_count_block'/>
            <int32_t name='y_count_block'/>
            <int32_t name='z_count_block'/>
            <int32_t name='x_count'/>
            <int32_t name='y_count'/>
            <int32_t name='z_count'/>
            <int32_t name='region_x'/>
            <int32_t name='region_y'/>
            <int32_t name='region_z'/>

            <static-array name='distance_lookup' count='53'>
                <static-array count='53' type-name='int16_t'
                              comment='Appears to be precomputed rounded integer distances'/>
            </static-array>

            <uint8_t name='rotation'/>

            <pointer type-name='z_level_flags' name='z_level_flags'
                     is-array='true' comment='v0.34.05'/>
        </compound>

        <pointer name='world_data' type-name='world_data'/>

        <compound name='worldgen_status'>
            <int16_t name='state'/>
            <int32_t name='num_rejects'/>
            <static-array count='53' type-name='int32_t'/>
            <static-array count='53' type-name='int32_t'/>
            <int16_t name='rejection_reason'/>
            <int32_t name='lakes_total'/>
            <int32_t/>
            <int16_t/>
            <int32_t name='lakes_cur'/>
            <int32_t/>
            <int32_t/>
            <static-array count='100' type-name='int32_t'/>
            <static-array count='100' type-name='int8_t'/>
            <static-array count='100' type-name='int16_t'/>
            <int32_t/>
            <int32_t name='finalized_civ_mats'/>
            <int32_t name='finalized_art'/>
            <int32_t name='finalized_uniforms'/>
            <int32_t name='finalized_sites'/>
            <int32_t/>
            <int32_t/>
            <int32_t/>
            <stl-vector type-name='pointer'/>
            <stl-vector type-name='pointer'/>
            <int32_t name='width'/>
            <int32_t name='height'/>
            <stl-vector type-name='pointer'/>
            <stl-vector type-name='pointer'/>
            <int32_t name='rivers_total'/>
            <int32_t name='rivers_cur'/>
            <int8_t/>
            <stl-string name='last_param_set'/>
            <stl-string name='last_seed'/>
            <stl-string name='last_name_seed'/>
            <stl-string name='last_history_seed'/>
            <stl-string name='last_creature_seed'/>
            <bool name='placed_caves'/>
            <bool name='placed_good_evil'/>
            <bool name='placed_megabeasts'/>
            <bool name='placed_other_beasts'/>
            <bool name='made_cave_pops'/>
            <bool name='made_cave_civs'/>
            <bool name='placed_civs'/>
            <bool name='finished_prehistory'/>
            <stl-vector type-name='pointer'/>
            <stl-vector type-name='pointer'/>
            <int32_t/>
            <int8_t/>
            <int8_t/>
            <int8_t/>
            <int8_t/>
            <stl-vector type-name='pointer'/>
            <stl-vector type-name='pointer'/>
            <int32_t/>
            <int32_t/>
            <static-array count='10'>
                <stl-vector/>
            </static-array>
            <static-array count='10'>
                <stl-vector/>
            </static-array>
            <static-array count='10'>
                <stl-vector/>
            </static-array>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <int32_t/>
            <int32_t/>
        </compound>

        <compound name='orphaned_flow_pool' type-name='flow_reuse_pool'/>

        -- RAWs

        <compound name='raws' type-name='world_raws'/>

        <compound name='unk_59dc4'>
            <compound name='regions' type-name='coord2d_path'/>
            <stl-vector name='unk1'>
                <pointer>
                    <compound name='ref' type-name='world_population_ref'/>
                    <stl-vector name='unk'>
                        <int32_t/>
                    </stl-vector>
                </pointer>
            </stl-vector>
        </compound>

        <compound name='flow_engine'>
            <int8_t name='rnd_16'/>
            <int16_t name='rnd_256'/>
            <int16_t name='rnd_pos'/>
            <static-array name='rnd_x' type-name='int16_t' count='16'/>
            <static-array name='rnd_y' type-name='int16_t' count='16'/>

            <int32_t name='block_idx' refers-to='$$._global.map.map_blocks[$]'/>

            <stl-vector name='unk7a' type-name='int16_t'/>
            <stl-vector name='unk7b' type-name='int16_t'/>
            <stl-vector name='unk7c' type-name='int16_t'/>
            <stl-vector name='unk7_cntdn' type-name='int16_t'/>
        </compound>

        <stl-vector name='busy_buildings' type-name='int32_t' ref-target='building'
                    comment='buildings with nonempty getUsers'/>

        <df-flagarray name='cavein_flags' comment='flag 0 means process cave columns'/>
        <int32_t name='unk_59e78'/>

        <compound name='worldgen'>
            <stl-string name='version'/>
            <int32_t name="next_unit_chunk_id"/>
            <int16_t name="next_unit_chunk_offset"/>
            <int32_t name="next_art_image_chunk_id"/>
            <int16_t name="next_art_image_chunk_offset"/>
            ctor 87ae880
            <compound name='worldgen_parms'>
                <stl-string name='title'/>
                <stl-string name='seed' comment='v0.34.01'/>
                <stl-string name='history_seed' comment='v0.34.01'/>
                <stl-string name='name_seed' comment='v0.34.01'/>
                <stl-string name='creature_seed' comment='v0.34.01'/>
                <int32_t name='dim_x'/>
                <int32_t name='dim_y'/>
                <stl-string name='custom_name'/>
                <bool name='has_seed'/>
                <bool name='has_history_seed'/>
                <bool name='has_name_seed'/>
                <bool name='has_creature_seed'/>
                <int32_t name='embark_points'/>
                <int32_t name='peak_number_min'/>
                <int32_t name='partial_ocean_edge_min'/>
                <int32_t name='complete_ocean_edge_min'/>
                <int32_t name='volcano_min'/>
                <static-array name='region_counts' count='3'>
                    <static-array type-name='int32_t' count='10' index-enum='worldgen_region_type'/>
                </static-array>
                <static-array type-name='int32_t' name='river_mins' count='2'/>
                <int32_t name='subregion_max'/>
                <int32_t name='cavern_layer_count'/>
                <int32_t name='cavern_layer_openness_min'/>
                <int32_t name='cavern_layer_openness_max'/>
                <int32_t name='cavern_layer_passage_density_min'/>
                <int32_t name='cavern_layer_passage_density_max'/>
                <int32_t name='cavern_layer_water_min'/>
                <int32_t name='cavern_layer_water_max'/>
                <bool name='have_bottom_layer_1'/>
                <bool name='have_bottom_layer_2'/>
                <int32_t name='levels_above_ground'/>
                <int32_t name='levels_above_layer_1'/>
                <int32_t name='levels_above_layer_2'/>
                <int32_t name='levels_above_layer_3'/>
                <int32_t name='levels_above_layer_4'/>
                <int32_t name='levels_above_layer_5'/>
                <int32_t name='levels_at_bottom'/>
                <int32_t name='cave_min_size'/>
                <int32_t name='cave_max_size'/>
                <int32_t name='mountain_cave_min'/>
                <int32_t name='non_mountain_cave_min'/>
                <int32_t name='total_civ_number'/>
                <int32_t name='rain_ranges_1'/>
                <int32_t name='rain_ranges_0'/>
                <int32_t name='rain_ranges_2'/>
                <int32_t name='drainage_ranges_1'/>
                <int32_t name='drainage_ranges_0'/>
                <int32_t name='drainage_ranges_2'/>
                <int32_t name='savagery_ranges_1'/>
                <int32_t name='savagery_ranges_0'/>
                <int32_t name='savagery_ranges_2'/>
                <int32_t name='volcanism_ranges_1'/>
                <int32_t name='volcanism_ranges_0'/>
                <int32_t name='volcanism_ranges_2'/>
                <static-array count='4' name='ranges'>
                    <static-array type-name='int32_t' count='24' index-enum='worldgen_range_type'/>
                </static-array>
                <int32_t name='beast_end_year'/>
                <int32_t name='end_year'/>
                <int32_t name='beast_end_year_percent'/>
                <int32_t name='total_civ_population'/>
                <int32_t name='site_cap'/>
                <int32_t name='elevation_ranges_1'/>
                <int32_t name='elevation_ranges_0'/>
                <int32_t name='elevation_ranges_2'/>
                <int32_t name='mineral_scarcity'/>
                <int32_t name='megabeast_cap'/>
                <int32_t name='semimegabeast_cap'/>
                <int32_t name='titan_number'/>
                <static-array type-name='int32_t' name='titan_attack_trigger' count='3'/>
                <int32_t name='demon_number'/>
                <int32_t name='night_troll_number'/>
                <int32_t name='bogeyman_number'/>
                <int32_t name='vampire_number'/>
                <int32_t name='werebeast_number'/>
                <int32_t name='secret_number'/>
                <int32_t name='regional_interaction_number'/>
                <int32_t name='disturbance_interaction_number'/>
                <int32_t name='evil_cloud_number'/>
                <int32_t name='evil_rain_number'/>
                <int32_t name='good_sq_counts_0'/>
                <int32_t name='evil_sq_counts_0'/>
                <int32_t name='good_sq_counts_1'/>
                <int32_t name='evil_sq_counts_1'/>
                <int32_t name='good_sq_counts_2'/>
                <int32_t name='evil_sq_counts_2'/>
                <static-array type-name='int32_t' name='elevation_frequency' count='6'/>
                <static-array type-name='int32_t' name='rain_frequency' count='6'/>
                <static-array type-name='int32_t' name='drainage_frequency' count='6'/>
                <static-array type-name='int32_t' name='savagery_frequency' count='6'/>
                <static-array type-name='int32_t' name='temperature_frequency' count='6'/>
                <static-array type-name='int32_t' name='volcanism_frequency' count='6'/>
                <pointer name='ps'/> dtor 83bed90
                <int32_t name='reveal_all_history'/>
                <int32_t name='cull_historical_figures'/>
                <int32_t name='erosion_cycle_count'/>
                <int32_t name='periodically_erode_extremes'/>
                <int32_t name='orographic_precipitation'/>
                <int32_t name='playable_civilization_required'/>
                <int32_t name='all_caves_visible'/>
                <int32_t name='show_embark_tunnel'/>
                <bool/>
            </compound>
        </compound>

        -- hist figures

        <compound name='history' type-name='world_history'/>

        <stl-vector name='entity_populations' pointer-type='entity_population'/>

        <bool name="reindex_pathfinding" comment='forces map_block.passable to be recomputed'/>

        <int32_t name='frame_counter' comment='increases by 1 every time . is pressed'/>

        <stl-vector name='orphaned_flows' pointer-type='flow_info' comment='flows that are not tied to a map_block'/>

        <compound name='pathfinder'>
            <static-array name='boundary_heap' count='80000'>
                <comment>A heap of current boundary tiles.</comment>
                <int32_t name='total_cost'/>
                <int32_t name='local_cost'/>
                <int16_t name='x'/>
                <int16_t name='y'/>
                <int32_t name='z'/>
            </static-array>
            <int32_t name='heap_count'/>

            <compound name='pos1' type-name='coord'/>
            <compound name='pos2' type-name='coord'/>

            -- Not quite simple distance, it seems:
            <int32_t name='dist_x'/>
            <int32_t name='dist_y'/>
            <int32_t name='dist_z'/>

            <int32_t name='next_path_cost'/>
            <bool name='wipe_path_cost'/>
            <uint16_t name='next_path_tag'/>
            <bool name='wipe_path_tag'/>

            <int16_t name='next_walkable_id'/>

            <int16_t name='plant_update_step'/>
            <bool/>
            <int32_t/>
        </compound>

        <compound name='cur_savegame'>
            <stl-string name='save_dir'/>
            <padding size='4'/>

            <stl-vector name='map_features' pointer-type='feature_init'/>
            <stl-vector type-name='int16_t' name='feature_x'/>
            <stl-vector type-name='int16_t' name='feature_y'/>
            <stl-vector type-name='int16_t' name='feature_local_idx' comment='same as map_block.local_feature'/>
            <stl-vector type-name='int32_t' name='feature_global_idx' ref-target='world_underground_region'/>
            <stl-vector pointer-type='feature_init' comment='from unk_E4'/>
            <stl-vector type-name='int16_t' comment='unk_E4.region_x'/>
            <stl-vector type-name='int16_t' comment='unk_E4.region_y'/>
            <stl-vector type-name='int16_t' comment='unk_E4.unk4'/>
            <stl-vector type-name='int16_t' comment='unk_E4.unk6'/>
            <stl-vector type-name='int16_t' comment='unk_E4.local_feature_idx'/>
            <stl-vector type-name='int32_t' comment='unk_E4.global_feature_idx'/>
            <stl-vector type-name='int32_t' comment='unk_E4.unk10'/>
            <stl-vector type-name='int16_t' comment='unk_E4.unk14'/>
            <stl-vector type-name='int16_t' comment='unk_E4.unk16'/>
            <stl-vector type-name='int16_t' comment='unk_E4.unk18'/>
            <stl-vector type-name='int16_t' comment='unk_E4.unk1a'/>
            <stl-vector type-name='int16_t' comment='unk_E4.unk1a'/>
            <stl-vector type-name='int16_t' comment='unk_E4.unk1c'/>
        </compound>

        <bool/>
        <bool/>

        <compound name='arena_spawn'>
            <stl-vector name='race' type-name='int16_t' ref-target='creature_raw'/>
            <stl-vector name='caste' type-name='int16_t' ref-target='caste_raw' aux-value='$$._parent.race[$._key]'/>

            <int32_t name='type' refers-to='$$._parent.caste[$].ref-target'/>

            <stl-string comment='v0.34.08'/>

            <static-array name='item_types' count='105' comment='true array'>
                <stl-vector>
                    <pointer>
                        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
                        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

                        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
                        <int32_t name='matindex'/>

                        <bool/>
                    </pointer>
                </stl-vector>
            </static-array>

            <stl-vector/>
            <stl-vector/>
            <stl-vector/>

            <compound name='equipment'>
                <stl-vector name='skills'>
                    <enum base-type='int16_t' type-name='job_skill'/>
                </stl-vector>
                <stl-vector name='skill_levels' type-name='int32_t'
                            index-refers-to='$$._parent.skills[$]'/>

                <stl-vector name='item_types'>
                    <enum base-type='int16_t' type-name='item_type'/>
                </stl-vector>
                <stl-vector name='item_subtypes'>
                    <int16_t refers-to='(item-subtype-target $$._parent._parent.item_types[$$._key] $)'/>
                </stl-vector>
                <compound name='item_materials' type-name='material_vec_ref'/>
                <stl-vector name='item_counts' type-name='int32_t'/>
            </compound>

            <int32_t name='side'/>
            <int32_t name='interaction' refers-to='$$._parent.interactions[$]'/>

            <stl-vector name='interactions' type-name='pointer' comment='v0.34.01'/>
            <stl-vector name='creature_cnt' type-name='int32_t'
                        index-refers-to='(find-instance $creature_raw $)'/>
        </compound>

        <compound name='unk_19325c'>
            <stl-vector>
                <pointer>
                    <int32_t/>
                    <int32_t/>
                    <int16_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                </pointer>
            </stl-vector>
            <stl-vector>
                <pointer>
                    <int32_t/>
                    <int32_t/>
                </pointer>
            </stl-vector>
            <stl-vector>
                <pointer>
                    <int16_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                </pointer>
            </stl-vector>

            <int32_t/>
            <int32_t/>
            <int32_t/>
        </compound>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
